# 페이지네이션 (Pagination)

## 페이지네이션이란

한정된 네트워크 자원을 효율적으로 활용하기 위해 특정한 정렬 기준에 따라 데이터를 분할하여 가져오는 것  
`Pagination`은 아래와 같은 두가지 방식으로 처리가 가능하다.

- 오프셋 기반 페이지네이션(Offset-based Pagination)
  - DB의 offset쿼리를 사용하여 페이지 단위로 구분하여 요청/응답
- 커서 기반 페이지네이션(Cursor-based Pagination)
  - Cursor 개념을 사용하여 사용자에게 응답해준 마지막 데이터 기준으로 다음 n개 요청/응답

<br>

## 오프셋 기반 페이지네이션

MySQL 에서라면 간단하게 OFFSET 쿼리와 LIMIT 쿼리에 콤마를 붙여 '건너 뛸' row 숫자를 지정하여 페이지네이션을 구현한다.  
즉, 페이지 단위로 구분한다.

**예제**

```sql
SELECT id
FROM products
ORDER BY id DESC
LIMIT 20, 40
```

**단점**

- 페이지 요청사이 데이터 변화가 있는 경우 중복 데이터 발생
  - 페이스북이나 인스타그램과 같은 잦은 수정, 생성, 삭제가 반복되는 서비스에서는 더 이상 효율적으로 작동하지 못하게 되었다.
- 대부분의 RDBMS에서 OFFSET 쿼리의 퍼포먼스 이슈
  - 극단적으로 10억번째 페이지에 있는 값을 찾고 싶다면 OFFSET 또는 skip에 매우 큰 숫자가 들어가게 된다.

<br>

## 커서 기반 페이지네이션

커서 기반 페이지네이션은 우리가 원하는 데이터가 '어떤 데이터의 다음'에 있다는데에 집중한다.

**예제**

```sql
SELECT id, title
  FROM `products`
  WHERE id < 996
  ORDER BY id DESC
  LIMIT 5
```

**장점**

- 우수한 실시간 데이터 처리능력
  - 데이터를 정적으로 유지할 것을 필요로 하지 않는다.
- 누락되지 않는 데이터
- 중복되지 않는 데이터
- 효율적인 빅데이터 컨트롤

**단점**

- 제한된 정렬 기능
- 조금 까다로운 구현
- 무한 스크롤 중독 가능성
  - 엄밀히 말하면 단점은 아님

<br>

## 결론

**작은 몇몇 단점들이 있지만 실시간 데이터 처리에 있어서 커서 페이징이 답이다.**
